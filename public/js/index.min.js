function toggleSignIn(n,i){firebase.auth().currentUser?firebase.auth().signOut():firebase.auth().signInWithEmailAndPassword(n,i).catch(function(n){var i=n.message;alertSend(i,"#loginModal .modal-body","danger","Sign In fail!"),hideLoading()})}function handleSignUp(n,i,e){return e&&i?firebase.auth().createUserWithEmailAndPassword(i,e):(alertSend("Password and/or email invalid","#succesSignUp","danger","Error!"),hideLoading(),!1)}function sendEmailVerification(){return firebase.auth().currentUser.sendEmailVerification()}function signInWithRedirect(n){var i=firebase.auth();i.signInWithRedirect(n),i.getRedirectResult().then(function(n){n.user},function(n){var e=n.message;console.log(n),alertModal("danger",e,"Sign Up fail!"),"auth/account-exists-with-different-credential"===n.code&&i.fetchProvidersForEmail(email).then(function(n){})})}function initApp(){firebase.database();firebase.auth().onAuthStateChanged(function(n){n?(Cookies.set("uid",n.uid),$("#signinBtn").data("status",!0),firebase.database().ref("usersInfo/"+n.uid).update({provider:n.providerData[0].providerId,name:n.providerData[0].displayName,email:n.providerData[0].email,photo:n.providerData[0].photoURL}).then(function(){ga("set","userId",n.uid),"/"===window.location.pathname&&(loading(),window.location.pathname="auth/"+n.uid)})):(console.log("No user logged in"),hideLoading())})}$(document).ready(function(){$(".signInFB").on("click",function(n){n.preventDefault(),console.log("Click")}),$(".signInG").on("click",function(n){n.preventDefault(),console.log("Click")}),$(".signinBtn").on("click",function(n){ga("send","event","click","btn","SignIn");var i=$("#signinBtn").data("status");i?$("#signupForm").trigger("reset"):$("#loginModal").modal("show")}),$(".signinForm").on("submit",function(n){if(n.preventDefault(),!$(".signinForm").find(".btn").hasClass("disabled")){loading(),alertSend(" ","#successSignIn","info","Loading...");var i=$("input#email").val(),e=$("input#password").val();toggleSignIn(i,e)}}),$(".modal").on("hide.bs.modal",function(n){resetModal(!1,this)}),$("#signUpModal button").on("click",function(n){$(this).hasClass("disabled")&&n.preventDefault()}),$("#signUpModal").on("shown.bs.modal",function(){$(".signupForm").on("submit",function(n){n.preventDefault(),loading();var i=setTimeout(function(){hideLoading()},5e3);if(!$(this).find('button[type="submit"]').hasClass("disabled")){ga("send","event","click","submitForm","ValidationSignUp");var e=$(this).attr("id"),a=$("#"+e).find("input#name").val(),t=$("#"+e).find("input#email").val(),o=$("#"+e).find("input#cpassword").val();alertSend(" ","#successSignUp","info","Loading...");var r=handleSignUp(a,t,o);r?r.then(function(n){var i=firebase.database().ref("usersInfo"),e=i.push();e.set({provider:n.providerData[0].providerId,name:a,email:n.providerData[0].email,photo:n.providerData[0].photoURL}),ga("send","event","click","submitForm","signUp")}).catch(function(n){alertSend(n.message,"#succesSignUp","danger","Error!"),console.log(n),clearTimeout(i),hideLoading()}):(alertSend("Password and/or email not valid.","#succesSignUp","danger","Error!"),clearTimeout(i),hideLoading())}})}),$(".signInFB").on("click",function(n){n.preventDefault();var i=new firebase.auth.FacebookAuthProvider;i.addScope("email"),signInWithRedirect(i)}),$(".signInG").on("click",function(n){n.preventDefault();var i=new firebase.auth.GoogleAuthProvider;signInWithRedirect(i)}),initApp()});var database=firebase.database();