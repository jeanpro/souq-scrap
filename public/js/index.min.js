function toggleSignIn(n,e){firebase.auth().currentUser?firebase.auth().signOut():firebase.auth().signInWithEmailAndPassword(n,e).catch(function(n){var e=n.message;alertSend(e,"#loginModal .modal-body","danger","Sign In fail!"),hideLoading()})}function handleSignUp(n,e,i){return i&&e?firebase.auth().createUserWithEmailAndPassword(e,i):(alertSend("Password and/or email invalid","#succesSignUp","danger","Error!"),hideLoading(),!1)}function sendEmailVerification(){return firebase.auth().currentUser.sendEmailVerification()}function signInWithRedirect(n){var e=firebase.auth();e.signInWithRedirect(n),e.getRedirectResult().then(function(n){n.user},function(n){var i=n.message;console.log(n),alertModal("danger",i,"Sign Up fail!"),"auth/account-exists-with-different-credential"===n.code&&e.fetchProvidersForEmail(email).then(function(n){})})}function initApp(){firebase.database(),firebase.auth().onAuthStateChanged(function(n){n?(Cookies.set("uid",n.uid),$("#signinBtn").data("status",!0),firebase.database().ref("usersInfo/"+n.uid).update({provider:n.providerData[0].providerId,name:n.providerData[0].displayName,email:n.providerData[0].email,photo:n.providerData[0].photoURL}).then(function(){ga("set","userId",n.uid),"/"===window.location.pathname&&(loading(),window.location.pathname="auth/"+n.uid)})):(console.log("No user logged in"),hideLoading())})}$(document).ready(function(){$(".signInFB").on("click",function(n){n.preventDefault(),console.log("Click")}),$(".signInG").on("click",function(n){n.preventDefault(),console.log("Click")}),$(".signinBtn").on("click",function(n){ga("send","event","click","btn","SignIn");var e=$("#signinBtn").data("status");e?$("#signupForm").trigger("reset"):$("#loginModal").modal("show")}),$(".signinForm").on("submit",function(n){if(n.preventDefault(),!$(".signinForm").find(".btn").hasClass("disabled")){loading(),setTimeout(function(){alertSend("Unable to login, try again later.","#successSignIn","danger"),hideLoading()},5e3),alertSend(" ","#successSignIn","info","Loading...");var e=$("input#email").val(),i=$("input#password").val();toggleSignIn(e,i)}}),$(".modal").on("hide.bs.modal",function(n){resetModal(!1,this)}),$("#signUpModal button").on("click",function(n){$(this).hasClass("disabled")&&n.preventDefault()}),$("#signUpModal").on("shown.bs.modal",function(){$(".signupForm").on("submit",function(n){n.preventDefault(),loading();var e=setTimeout(function(){hideLoading()},5e3);if(!$(this).find('button[type="submit"]').hasClass("disabled")){ga("send","event","click","submitForm","ValidationSignUp");var i=$(this).attr("id"),a=$("#"+i).find("input#name").val(),t=$("#"+i).find("input#email").val(),o=$("#"+i).find("input#cpassword").val();alertSend(" ","#successSignUp","info","Loading...");var s=handleSignUp(a,t,o);s?s.then(function(n){alertSend("Alright! Redirecting...","#succesSignUp","success"),Cookies.set("uid",n.uid);var e=firebase.database().ref("usersInfo/"+n.uid);e.update({provider:n.providerData[0].providerId,name:a,email:n.providerData[0].email,photo:n.providerData[0].photoURL}).then(function(){ga("send","event","click","submitForm","signUp")}).catch(function(n){console.log(n)})}).catch(function(n){alertSend(n.message,"#succesSignUp","danger","Error!"),console.log(n),clearTimeout(e),hideLoading()}):(alertSend("Password and/or email not valid.","#succesSignUp","danger","Error!"),clearTimeout(e),hideLoading())}})}),$(".signInFB").on("click",function(n){n.preventDefault();var e=new firebase.auth.FacebookAuthProvider;e.addScope("email"),signInWithRedirect(e)}),$(".signInG").on("click",function(n){n.preventDefault();var e=new firebase.auth.GoogleAuthProvider;signInWithRedirect(e)}),initApp()});var database=firebase.database();