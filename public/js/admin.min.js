$(document).ready(function(){$("#list").parents(".row").hide(),$(".productTracker").on("click",function(){$("#board").show(),$("#list").parents(".row").hide()}),$(".listAll").on("click",function(t){t.preventDefault(),$(".loading").show(),$("#list").html("Loading..."),$.ajax({method:"POST",url:"/listall",data:{uid:Cookies.get("uid")},success:function(t){$("#board").hide(),$("#list").html(t),$("#list").parents(".row").show(),$(".new-request").on("click",function(t){t.preventDefault(),$(".new-request").button("loading");var e=$(this),r=e.parents("tr").attr("id"),a=parseFloat(e.find("td.text-center.product-price").text()),n=e.parents("tr").find(".product-link").attr("href");n&&$.ajax({method:"POST",url:"/update",data:{pid:r,url:n},success:function(t){$(".new-request").button("reset"),t.success?(e.find("td.text-center.product-price").text(t.actualPrice),parseFloat(t.actualPrice)>a?e.find("td.text-center.product-price-change").html('<i class="fa fa-arrow-up"></i>'):(parseFloat(t.actualPrice)=a)?e.find("td.text-center.product-price-change").html('<i class="fa fa-minus"></i>'):e.find("td.text-center.product-price-change").html('<i class="fa fa-arrow-down"></i>'),e.parents("tr").find(".product-update").text(t.lastUpdate),e.parents("tr").addClass("success")):(e.parents("tr").addClass("danger"),alertModal("danger",JSON.stringify(error),"Error!"),console.log(error))},error:function(t){console.log(t),e.parents("tr").addClass("danger"),alertModal("danger","Error during update Request!","Request Fail!"),$(".new-request").button("reset")}})}),$(".graph-open").on("click",function(t){var e=$(this).data("id"),r=generateGraph(e,!1,"#graphModal");r.then(function(t){t.on("draw",function(t){"line"!==t.type&&"area"!==t.type||t.element.animate({d:{begin:2e3*t.index,dur:2e3,from:t.path.clone().scale(1,0).translate(0,t.chartRect.height()).stringify(),to:t.path.clone().stringify(),easing:Chartist.Svg.Easing.easeOutQuint}})}),t.update()}).catch(function(t){setTimeout(function(){$("#graphModal").modal("hide"),alertModal("danger","Could not open graph.","Error!")},200)})}),$(".loading").hide()},error:function(t){alertModal("danger","Unable to list products.","Error"),console.log(t)}})})});